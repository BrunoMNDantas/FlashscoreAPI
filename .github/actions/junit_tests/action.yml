name: "JUnit Tests"
description: "Runs JUnit tests"

runs:
  using: "composite"
  timeout-minutes: 15
  steps:
    - name: Setup repository
      uses: ./.github/actions/setup_repository/

    - name: Set Up Java
      uses: actions/setup-java@v3
      with:
        distribution: 'temurin'
        java-version: '17'

    - name: Build Selenium environment
      run: sudo ./deploy/scripts/build_selenium_environment.sh

    - name: Export Selenium environment variables
      run: |
        echo "CHROME_BIN=/usr/bin/google-chrome" >> $GITHUB_ENV
        echo "CHROMEDRIVER_BIN=/usr/bin/chromedriver" >> $GITHUB_ENV
        echo "DRIVER_PATH=/usr/bin/chromedriver" >> $GITHUB_ENV

    - name: Run Gradle Build and Tests
      run: ./gradlew clean build test